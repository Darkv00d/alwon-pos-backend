# Spring Boot Server
server.port=8088
server.servlet.context-path=/api

# Application Info
spring.application.name=auth-service
spring.profiles.active=dev

# ===============================
# DATABASE - PostgreSQL
# ===============================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:alwon_pos}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.default_schema=auth

# ===============================
# REDIS - PIN Storage
# ===============================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}
spring.data.redis.timeout=60000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ===============================
# JWT Configuration
# ===============================
jwt.secret=${JWT_SECRET:alwon-pos-secret-key-change-in-production-2025}
jwt.expiration=28800000
# 8 hours in milliseconds

# ===============================
# PIN Configuration
# ===============================
pin.expiration.hours=8
pin.max.attempts=3

# ===============================
# TWILIO - WhatsApp
# ===============================
twilio.account.sid=${TWILIO_ACCOUNT_SID:}
twilio.auth.token=${TWILIO_AUTH_TOKEN:}
twilio.whatsapp.from=${TWILIO_WHATSAPP_FROM:whatsapp:+14155238886}
twilio.enabled=${TWILIO_ENABLED:false}

# ===============================
# SENDGRID - Email
# ===============================
sendgrid.api.key=${SENDGRID_API_KEY:}
sendgrid.from.email=${SENDGRID_FROM_EMAIL:noreply@alwon.com}
sendgrid.from.name=Alwon POS
sendgrid.enabled=${SENDGRID_ENABLED:false}

# ===============================
# CENTRAL SYSTEM Integration
# ===============================
central.system.url=${CENTRAL_SYSTEM_URL:http://localhost:9999}
central.system.api.key=${CENTRAL_API_KEY:}
central.system.timeout=5000
central.system.enabled=${CENTRAL_ENABLED:false}

# ===============================
# RESILIENCE4J - Rate Limiting
# ===============================
resilience4j.ratelimiter.instances.auth.limit-for-period=5
resilience4j.ratelimiter.instances.auth.limit-refresh-period=60s
resilience4j.ratelimiter.instances.auth.timeout-duration=0

# ===============================
# CORS Configuration
# ===============================
cors.allowed.origins=${CORS_ORIGINS:http://localhost:3000}
cors.allowed.methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed.headers=*
cors.allow.credentials=true

# ===============================
# Actuator (Health/Metrics)
# ===============================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===============================
# Logging
# ===============================
logging.level.root=INFO
logging.level.com.alwon.pos.auth=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ===============================
# Swagger/OpenAPI
# ===============================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
